(function(){var e=function(u,F){return function(){return u.apply(F,arguments)}};this.BackboneValidate=function(){function i(u,F,t){this.attrs=u,this.validations=F,this.model=t,this.validate=e(this.validate,this),this.errors={}}return i.prototype.validate=function(){var u,F,t,e,a,n,r,i,s,l,o;if(null!=this.validations){for(e in s=this.validations)if(a=s[e],null!=(F=this.parseName(e)))if(_.isArray(F.value))for(r=n=0,i=(l=F.value).length;n<i;r=++n)o=l[r],t=this.applyValidations(o,a),u=F.fullName.replace(/\[\]/,"["+r+"]"),_.isEmpty(t)||(this.errors[u]=t);else t=this.applyValidations(F.value,a),_.isEmpty(t)||(this.errors[F.fullName]=t);if(!_.isEmpty(this.errors))return this.errors}},i.prototype.parseName=function(u){var F,t,e,a,n,r,i;if(/(\.?\w+\[\]){2,}/.test(u))throw new Error("Backbone.Validate: Nested arrays not supported");if(/\[\](\.\w+){2,}/.test(u))throw new Error("Backbone.Validate: Nesting within an array not supported");for(console.log("DEBUG: "+u),e=null!=(n=/\[(\d*)\]/.exec(F=u))?n[1]:void 0,i=null,t=0,a=(r=u.split(".")).length;t<a;t++)u=r[t].replace(/\[(\d+)?\]$/,""),i=null==i?this.attrs[u]:_.isArray(i)?_.map(i,u):i[u];return null==i?null:(null!=e&&0<e.length&&(i=i[e]),{name:u,fullName:F,value:i})},i.prototype.applyValidations=function(u,F){var t,e,a,n,r;for(r in a={},F)t=(!0===(n=F[r])?[]:[n]).concat([u,this.attrs,this.model]),(e=i.validators[r].apply(i.validators,t))&&(a[r]=this.getDisplayMessage(e,r,n));return a},i.validators={hasValue:function(u){return null!=u&&0!==$.trim(u).length},required:function(u,F){return!this.hasValue(u)},min:function(u,F,t){if(this.hasValue(F)&&F<u)return!0},max:function(u,F,t){if(this.hasValue(F)&&u<F)return!0},range:function(u,F,t){return this.hasValue(F)&&!(u[0]<=F&&F<=u[1])},pattern:function(u,F,t){return!(!this.hasValue(F)||u.test(F))},email:function(u,F){return!!/[\u00E0-\u00FC]+/i.test(u)||this.pattern(i.patterns.email,u,F)},url:function(u,F){return this.pattern(i.patterns.url,u,F)},custom:function(u,F,t,e){return u.call(e,F,t)},maxLength:function(u,F,t){return!!this.hasValue(F)&&F.toString().length>u},minLength:function(u,F,t){return!!this.hasValue(F)&&F.toString().length<u},lengthRange:function(u,F,t){return!this.hasValue(F)||(u[0]>F.toString().length||u[1]<F.toString().length)}},i.patterns={email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i},i.messages={required:"is required",min:"must be greater than or equal to {{min}}",max:"must be less than or equal to {{max}}",range:"must be between {{0}} and {{1}}",minLength:"length must be greater than or equal to {{minLength}}",maxLength:"length must be less than or equal to {{maxLength}}",lengthRange:"length must be between {{0}} and {{1}}",pattern:"must match {{pattern}}",email:"must be a well-formed email address",url:"must be a well-formed URL",past:"must be a past date",future:"must be a future date"},i.prototype.getDisplayMessage=function(u,F,t){return _.isString(u)?this.getMessage(u)||u:this.getMessage(F,t)},i.prototype.getMessage=function(u,F){var t,e,a;if(!(e=i.messages[u]))return!1;if(!F)return e;if(_.isObject(F)&&!_.isRegExp(F)){for(t in F)a=F[t],e=e.replace("{{"+t+"}}",a);return e}return e.replace("{{"+u+"}}",F)},i}(),"undefined"!=typeof Backbone&&null!==Backbone&&(Backbone.Model.prototype.validate=function(u,F){return new BackboneValidate(u,this.validations,this).validate()})}).call(this);